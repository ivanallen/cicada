#include(ExternalProject)
#ExternalProject_Add(googletest
#    GIT_REPOSITORY    https://github.com/google/googletest.git
#    GIT_TAG           master
#    SOURCE_DIR        "${CMAKE_BINARY_DIR}/googletest-src"
#    BINARY_DIR        "${CMAKE_BINARY_DIR}/googletest-build"
#    CONFIGURE_COMMAND ""
#    BUILD_COMMAND     ""
#    INSTALL_COMMAND   ""
#    TEST_COMMAND      ""
#)

ExternalProject_Add(
    google_gtest
    URL https://github.com/google/googletest/archive/release-1.8.0.zip
    PREFIX ${CMAKE_BINARY_DIR}/thirdparty/gtest
    SOURCE_DIR ${CMAKE_BINARY_DIR}/thirdparty/gtest/source
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_BINARY_DIR}/thirdparty/gtest/build -DBUILD_SHARED_LIBS=OFF
)

ExternalProject_Add(
    google_glog
    URL https://github.com/google/glog/archive/refs/tags/v0.5.0.zip
    PREFIX ${CMAKE_BINARY_DIR}/thirdparty/glog
    SOURCE_DIR ${CMAKE_BINARY_DIR}/thirdparty/glog/source
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_BINARY_DIR}/thirdparty/glog/build -DBUILD_SHARED_LIBS=OFF
)

add_custom_target(thirdparty)
add_dependencies(thirdparty google_gtest)
add_dependencies(thirdparty google_glog)

include_directories(${CMAKE_BINARY_DIR}/thirdparty/gtest/build/include)
include_directories(${CMAKE_BINARY_DIR}/thirdparty/glog/build/include)

link_directories(${CMAKE_BINARY_DIR}/thirdparty/gtest/build/lib)
link_directories(${CMAKE_BINARY_DIR}/thirdparty/glog/build/lib)
